<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Daily Wake-Up Time Tracker 2026</title>
    <style>
        /* CSS Variables for Theming */
        :root {
            --bg-primary: #ffffff;
            --bg-secondary: #f5f5f5;
            --bg-card: #ffffff;
            --text-primary: #1a1a1a;
            --text-secondary: #666666;
            --accent: #4a90e2;
            --accent-hover: #357abd;
            --success: #4caf50;
            --error: #f44336;
            --warning: #ff9800;
            --border: #e0e0e0;
            --shadow: rgba(0, 0, 0, 0.1);
            --shadow-hover: rgba(0, 0, 0, 0.15);
        }

        [data-theme="dark"] {
            --bg-primary: #1a1a1a;
            --bg-secondary: #2d2d2d;
            --bg-card: #242424;
            --text-primary: #ffffff;
            --text-secondary: #b0b0b0;
            --accent: #5ba3f5;
            --accent-hover: #4a90e2;
            --success: #66bb6a;
            --error: #ef5350;
            --warning: #ffa726;
            --border: #404040;
            --shadow: rgba(0, 0, 0, 0.3);
            --shadow-hover: rgba(0, 0, 0, 0.4);
        }

        /* Reset & Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background-color: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.6;
            transition: background-color 0.3s ease, color 0.3s ease;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 0;
            margin-bottom: 30px;
            border-bottom: 2px solid var(--border);
        }

        .header h1 {
            font-size: 2rem;
            font-weight: 700;
            color: var(--text-primary);
        }

        .theme-toggle {
            background: var(--bg-card);
            border: 2px solid var(--border);
            border-radius: 50%;
            width: 45px;
            height: 45px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            transition: all 0.3s ease;
        }

        .theme-toggle:hover {
            transform: scale(1.1);
            box-shadow: 0 4px 8px var(--shadow);
        }

        .section-header {
            margin-bottom: 30px;
        }

        .section-header h2 {
            font-size: 1.8rem;
            margin-bottom: 10px;
        }

        .subtitle {
            color: var(--text-secondary);
            font-size: 1rem;
        }

        /* Statistics Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: var(--bg-card);
            padding: 25px;
            border-radius: 12px;
            border: 2px solid var(--border);
            text-align: center;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 16px var(--shadow-hover);
        }

        .stat-value {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--accent);
            margin-bottom: 8px;
        }

        .stat-label {
            color: var(--text-secondary);
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        /* Input Section */
        .input-section {
            background: var(--bg-card);
            padding: 25px;
            border-radius: 12px;
            border: 2px solid var(--border);
            margin-bottom: 30px;
        }

        .input-section h3 {
            margin-bottom: 20px;
            font-size: 1.3rem;
        }

        .wakeup-form {
            display: grid;
            grid-template-columns: 1fr 1fr auto;
            gap: 15px;
            align-items: end;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        .form-group label {
            margin-bottom: 8px;
            color: var(--text-secondary);
            font-weight: 500;
        }

        .form-group input {
            padding: 12px;
            border: 2px solid var(--border);
            border-radius: 8px;
            background: var(--bg-primary);
            color: var(--text-primary);
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus {
            outline: none;
            border-color: var(--accent);
        }

        /* Buttons */
        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            white-space: nowrap;
        }

        .btn-primary {
            background: var(--accent);
            color: white;
        }

        .btn-primary:hover:not(:disabled) {
            background: var(--accent-hover);
            transform: translateY(-2px);
            box-shadow: 0 4px 8px var(--shadow);
        }

        .btn-secondary {
            background: var(--bg-secondary);
            color: var(--text-primary);
            border: 2px solid var(--border);
        }

        .btn-secondary:hover {
            border-color: var(--accent);
            color: var(--accent);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .btn-primary:disabled {
            background: var(--accent);
            opacity: 0.7;
        }

        /* Calendar */
        .calendar-section {
            background: var(--bg-card);
            padding: 25px;
            border-radius: 12px;
            border: 2px solid var(--border);
        }

        .calendar-controls {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
        }

        .month-select {
            padding: 10px 15px;
            border: 2px solid var(--border);
            border-radius: 8px;
            background: var(--bg-primary);
            color: var(--text-primary);
            font-size: 1rem;
            cursor: pointer;
        }

        .calendar {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 8px;
            margin-bottom: 20px;
        }

        .calendar-day-header {
            text-align: center;
            font-weight: 600;
            padding: 10px;
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .calendar-day {
            aspect-ratio: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 2px solid var(--border);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            font-weight: 500;
            position: relative;
        }

        .calendar-day:hover {
            transform: scale(1.1);
            z-index: 1;
        }

        .calendar-day.empty {
            border: none;
            cursor: default;
        }

        .calendar-day.success {
            background: var(--success);
            color: white;
            border-color: var(--success);
        }

        .calendar-day.missed {
            background: var(--error);
            color: white;
            border-color: var(--error);
        }

        .calendar-day.no-data {
            background: var(--bg-secondary);
            color: var(--text-secondary);
        }

        .calendar-day.today {
            box-shadow: 0 0 0 3px var(--accent);
        }

        .legend {
            display: flex;
            justify-content: center;
            gap: 30px;
            flex-wrap: wrap;
            margin-top: 20px;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .legend-color {
            width: 20px;
            height: 20px;
            border-radius: 4px;
            border: 2px solid var(--border);
        }

        .legend-color.success {
            background: var(--success);
        }

        .legend-color.missed {
            background: var(--error);
        }

        .legend-color.no-data {
            background: var(--bg-secondary);
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }

            .header h1 {
                font-size: 1.5rem;
            }

            .wakeup-form {
                grid-template-columns: 1fr;
            }

            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .calendar {
                gap: 4px;
            }

            .calendar-day {
                font-size: 0.85rem;
            }
        }

        @media (max-width: 480px) {
            .stats-grid {
                grid-template-columns: 1fr;
            }

            .calendar-controls {
                flex-wrap: wrap;
            }
        }
    </style>
</head>

<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <h1>‚è∞ Daily Wake-Up Tracker 2026</h1>
            <button class="theme-toggle" id="themeToggle" aria-label="Toggle theme">
                <span class="theme-icon">üåô</span>
            </button>
        </header>

        <!-- Wake-Up Tracker Section -->
        <section class="main-content">
            <div class="section-header">
                <h2>Daily Wake-Up Time Tracker</h2>
                <p class="subtitle">Target: 05:00 AM - 06:00 AM [IST]</p>
            </div>

            <!-- Statistics Dashboard -->
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-value" id="totalSuccess">0</div>
                    <div class="stat-label">Successful Days</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="currentStreak">0</div>
                    <div class="stat-label">Current Streak</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="longestStreak">0</div>
                    <div class="stat-label">Longest Streak</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="missedDays">0</div>
                    <div class="stat-label">Missed Days</div>
                </div>
            </div>

            <!-- Input Form -->
            <div class="input-section">
                <h3>Log Your Wake-Up Time</h3>
                <div style="margin-bottom: 15px;">
                    <button type="button" id="quickLogBtn" class="btn btn-primary"
                        style="width: 100%; margin-bottom: 10px;">
                        ‚ö° Quick Log (Current Date & Time)
                    </button>
                    <p style="text-align: center; color: var(--text-secondary); font-size: 0.9rem;">
                        Automatically detects and logs current date and time
                    </p>
                </div>
                <form id="wakeupForm" class="wakeup-form">
                    <div class="form-group">
                        <label for="wakeupDate">Date:</label>
                        <input type="date" id="wakeupDate" min="2026-01-01" max="2026-12-31" required>
                    </div>
                    <div class="form-group">
                        <label for="wakeupTime">Wake-Up Time:</label>
                        <input type="time" id="wakeupTime" required>
                    </div>
                    <button type="submit" class="btn btn-primary">Log Entry</button>
                </form>
            </div>

            <!-- Calendar View -->
            <div class="calendar-section">
                <h3>2026 Calendar View</h3>
                <div class="calendar-controls">
                    <button class="btn btn-secondary" id="prevMonth">‚Üê Prev</button>
                    <select id="monthSelect" class="month-select">
                        <option value="0">January</option>
                        <option value="1">February</option>
                        <option value="2">March</option>
                        <option value="3">April</option>
                        <option value="4">May</option>
                        <option value="5">June</option>
                        <option value="6">July</option>
                        <option value="7">August</option>
                        <option value="8">September</option>
                        <option value="9">October</option>
                        <option value="10">November</option>
                        <option value="11">December</option>
                    </select>
                    <button class="btn btn-secondary" id="nextMonth">Next ‚Üí</button>
                </div>
                <div class="calendar" id="calendar"></div>
                <div class="legend">
                    <div class="legend-item">
                        <span class="legend-color success"></span>
                        <span>On-time (05:00-06:00 AM)</span>
                    </div>
                    <div class="legend-item">
                        <span class="legend-color missed"></span>
                        <span>Late/Missed</span>
                    </div>
                    <div class="legend-item">
                        <span class="legend-color no-data"></span>
                        <span>No data</span>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <script type="text/javascript">
        // IndexedDB Database Wrapper for Wake-Up Tracker
            const DB_NAME = 'WakeUpTracker2026';
            const DB_VERSION = 1;
            let db = null;

            // Initialize IndexedDB
            function initDB() {
                return new Promise((resolve, reject) => {
                    const request = indexedDB.open(DB_NAME, DB_VERSION);

                    request.onerror = () => reject(request.error);
                    request.onsuccess = () => {
                        db = request.result;
                        resolve(db);
                    };

                    request.onupgradeneeded = (event) => {
                        const db = event.target.result;

                        // Create object stores if they don't exist
                        if (!db.objectStoreNames.contains('wakeupData')) {
                            db.createObjectStore('wakeupData', { keyPath: 'date' });
                        }
                        if (!db.objectStoreNames.contains('settings')) {
                            db.createObjectStore('settings', { keyPath: 'key' });
                        }
                    };
                });
            }

            // IndexedDB Helper Functions
            const DB = {
                async get(storeName, key) {
                    if (!db) await initDB();
                    return new Promise((resolve, reject) => {
                        const transaction = db.transaction([storeName], 'readonly');
                        const store = transaction.objectStore(storeName);
                        const request = store.get(key);
                        request.onsuccess = () => resolve(request.result);
                        request.onerror = () => reject(request.error);
                    });
                },

                async set(storeName, data) {
                    if (!db) await initDB();
                    return new Promise((resolve, reject) => {
                        const transaction = db.transaction([storeName], 'readwrite');
                        const store = transaction.objectStore(storeName);
                        const request = store.put(data);
                        request.onsuccess = () => resolve();
                        request.onerror = () => reject(request.error);
                    });
                },

                async getAll(storeName) {
                    if (!db) await initDB();
                    return new Promise((resolve, reject) => {
                        const transaction = db.transaction([storeName], 'readonly');
                        const store = transaction.objectStore(storeName);
                        const request = store.getAll();
                        request.onsuccess = () => {
                            const result = {};
                            request.result.forEach(item => {
                                if (storeName === 'wakeupData') {
                                    result[item.date] = item;
                                }
                            });
                            resolve(result);
                        };
                        request.onerror = () => reject(request.error);
                    });
                }
            };

            // Application State
            const AppState = {
                wakeupData: {},
                theme: 'light'
            };

            // Initialize App
            document.addEventListener('DOMContentLoaded', () => {
                initializeApp();
            });

            async function initializeApp() {
                await initDB();
                await loadData();
                setupTheme();
                setupWakeUpTracker();
                updateWakeUpStats();
            }

            // Theme Management
            function setupTheme() {
                document.documentElement.setAttribute('data-theme', AppState.theme);
                const themeIcon = document.querySelector('.theme-icon');
                themeIcon.textContent = AppState.theme === 'dark' ? '‚òÄÔ∏è' : 'üåô';

                document.getElementById('themeToggle').addEventListener('click', async () => {
                    AppState.theme = AppState.theme === 'light' ? 'dark' : 'light';
                    document.documentElement.setAttribute('data-theme', AppState.theme);
                    themeIcon.textContent = AppState.theme === 'dark' ? '‚òÄÔ∏è' : 'üåô';
                    await DB.set('settings', { key: 'theme', value: AppState.theme });
                });
            }

            // Wake-Up Tracker
            function setupWakeUpTracker() {
                const form = document.getElementById('wakeupForm');
                const dateInput = document.getElementById('wakeupDate');
                const timeInput = document.getElementById('wakeupTime');
                const quickLogBtn = document.getElementById('quickLogBtn');

                // Auto-detect and set current date and time
                function setCurrentDateTime() {
                    const now = new Date();
                    const today = now.toISOString().split('T')[0];
                    const currentTime = now.toTimeString().slice(0, 5); // HH:MM format

                    dateInput.value = today;
                    timeInput.value = currentTime;
                }

                // Set current date/time on load
                setCurrentDateTime();

                // Quick log button - logs current date and time immediately
                if (quickLogBtn) {
                    quickLogBtn.addEventListener('click', async (e) => {
                        e.preventDefault();
                        setCurrentDateTime();
                        const date = dateInput.value;
                        const time = timeInput.value;

                        if (!date || !time) return;

                        // Check if entry already exists
                        if (AppState.wakeupData[date]) {
                            if (confirm('An entry for this date already exists. Overwrite?')) {
                                await logWakeUpTime(date, time);
                            }
                        } else {
                            await logWakeUpTime(date, time);
                        }
                    });
                }

                form.addEventListener('submit', async (e) => {
                    e.preventDefault();

                    const date = dateInput.value;
                    const time = timeInput.value;

                    if (!date || !time) return;

                    // Check if entry already exists
                    if (AppState.wakeupData[date]) {
                        if (confirm('An entry for this date already exists. Overwrite?')) {
                            await logWakeUpTime(date, time);
                        }
                    } else {
                        await logWakeUpTime(date, time);
                    }
                });

                // Calendar navigation
                const monthSelect = document.getElementById('monthSelect');
                const currentMonth = new Date().getMonth();
                monthSelect.value = currentMonth;
                monthSelect.addEventListener('change', () => renderCalendar(parseInt(monthSelect.value)));

                document.getElementById('prevMonth').addEventListener('click', () => {
                    const current = parseInt(monthSelect.value);
                    monthSelect.value = current === 0 ? 11 : current - 1;
                    renderCalendar(parseInt(monthSelect.value));
                });

                document.getElementById('nextMonth').addEventListener('click', () => {
                    const current = parseInt(monthSelect.value);
                    monthSelect.value = current === 11 ? 0 : current + 1;
                    renderCalendar(parseInt(monthSelect.value));
                });

                renderCalendar(currentMonth);
            }

            async function logWakeUpTime(date, time) {
                const [hours, minutes] = time.split(':').map(Number);

                // Check if time is between 05:00-06:00 AM IST
                const isOnTime = hours === 5 || (hours === 6 && minutes === 0);

                const entry = {
                    date: date,
                    time: time,
                    isOnTime: isOnTime,
                    timestamp: Date.now()
                };

                AppState.wakeupData[date] = entry;

                // Save to IndexedDB
                await DB.set('wakeupData', entry);

                updateWakeUpStats();
                renderCalendar(new Date(date).getMonth());

                // Show success message
                const form = document.getElementById('wakeupForm');
                const btn = form.querySelector('button[type="submit"]');
                const originalText = btn ? btn.textContent : '';

                if (btn) {
                    btn.textContent = isOnTime ? '‚úÖ Logged Successfully!' : '‚ö†Ô∏è Logged (Late)';
                    btn.disabled = true;

                    setTimeout(() => {
                        btn.textContent = originalText;
                        btn.disabled = false;
                    }, 2000);
                }

                // Update quick log button if it exists
                const quickLogBtn = document.getElementById('quickLogBtn');
                if (quickLogBtn) {
                    const originalQuickText = quickLogBtn.textContent;
                    quickLogBtn.textContent = isOnTime ? '‚úÖ Logged!' : '‚ö†Ô∏è Logged (Late)';
                    quickLogBtn.disabled = true;

                    setTimeout(() => {
                        quickLogBtn.textContent = originalQuickText;
                        quickLogBtn.disabled = false;
                    }, 2000);
                }
            }

            function updateWakeUpStats() {
                const data = AppState.wakeupData;
                const dates = Object.keys(data).sort();

                let totalSuccess = 0;
                let currentStreak = 0;
                let longestStreak = 0;
                let missedDays = 0;
                let tempStreak = 0;

                // Calculate stats
                dates.forEach(date => {
                    if (data[date].isOnTime) {
                        totalSuccess++;
                        tempStreak++;
                        currentStreak = tempStreak;
                        longestStreak = Math.max(longestStreak, tempStreak);
                    } else {
                        missedDays++;
                        tempStreak = 0;
                    }
                });

                // Check if today is part of current streak
                const today = new Date().toISOString().split('T')[0];
                if (!data[today] || !data[today].isOnTime) {
                    currentStreak = 0;
                }

                document.getElementById('totalSuccess').textContent = totalSuccess;
                document.getElementById('currentStreak').textContent = currentStreak;
                document.getElementById('longestStreak').textContent = longestStreak;
                document.getElementById('missedDays').textContent = missedDays;
            }

            function renderCalendar(month) {
                const calendar = document.getElementById('calendar');
                calendar.innerHTML = '';

                // Day headers
                const dayHeaders = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
                dayHeaders.forEach(day => {
                    const header = document.createElement('div');
                    header.className = 'calendar-day-header';
                    header.textContent = day;
                    calendar.appendChild(header);
                });

                // Get first day of month and number of days
                const year = 2026;
                const firstDay = new Date(year, month, 1).getDay();
                const daysInMonth = new Date(year, month + 1, 0).getDate();
                const today = new Date();
                const isCurrentMonth = today.getFullYear() === year && today.getMonth() === month;
                const todayDate = today.getDate();

                // Empty cells for days before month starts
                for (let i = 0; i < firstDay; i++) {
                    const empty = document.createElement('div');
                    empty.className = 'calendar-day empty';
                    calendar.appendChild(empty);
                }

                // Days of the month
                for (let day = 1; day <= daysInMonth; day++) {
                    const dayEl = document.createElement('div');
                    dayEl.className = 'calendar-day';
                    dayEl.textContent = day;

                    const dateStr = `${year}-${String(month + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
                    const entry = AppState.wakeupData[dateStr];

                    if (entry) {
                        dayEl.classList.add(entry.isOnTime ? 'success' : 'missed');
                        dayEl.title = `Wake-up time: ${entry.time} - ${entry.isOnTime ? 'On time' : 'Late'}`;
                    } else {
                        dayEl.classList.add('no-data');
                    }

                    if (isCurrentMonth && day === todayDate) {
                        dayEl.classList.add('today');
                    }

                    dayEl.addEventListener('click', () => {
                        const dateInput = document.getElementById('wakeupDate');
                        const timeInput = document.getElementById('wakeupTime');
                        dateInput.value = dateStr;

                        // If clicking on today's date, auto-fill current time
                        const today = new Date().toISOString().split('T')[0];
                        if (dateStr === today) {
                            const now = new Date();
                            timeInput.value = now.toTimeString().slice(0, 5);
                        } else if (entry) {
                            // If there's existing data for this date, show it
                            timeInput.value = entry.time;
                        }
                    });

                    calendar.appendChild(dayEl);
                }
            }

            // Data Persistence with IndexedDB
            async function loadData() {
                try {
                    // Load wake-up data
                    const wakeupData = await DB.getAll('wakeupData');
                    AppState.wakeupData = wakeupData;

                    // Load theme setting
                    const themeSetting = await DB.get('settings', 'theme');
                    if (themeSetting) {
                        AppState.theme = themeSetting.value;
                    }
                } catch (error) {
                    console.error('Error loading data:', error);
                    // Fallback: try to migrate from localStorage if IndexedDB fails
                    try {
                        const wakeupData = localStorage.getItem('wakeupData');
                        if (wakeupData) {
                            AppState.wakeupData = JSON.parse(wakeupData);
                            // Migrate to IndexedDB
                            for (const [date, entry] of Object.entries(AppState.wakeupData)) {
                                await DB.set('wakeupData', { date, ...entry });
                            }
                        }
                    } catch (migrationError) {
                        console.error('Migration error:', migrationError);
                    }
                }
            }
        

    </script>
</body>

</html>